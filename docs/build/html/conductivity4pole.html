

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>conductivity4pole module &mdash; CTD 0.9 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="logger_ctd module" href="logger_ctd.html" />
    <link rel="prev" title="conductivity2pole module" href="conductivity2pole.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> CTD
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="README.html">Overview</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">CTD</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="boot.html">boot module</a></li>
<li class="toctree-l2"><a class="reference internal" href="conductivity2pole.html">conductivity2pole module</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">conductivity4pole module</a></li>
<li class="toctree-l2"><a class="reference internal" href="logger_ctd.html">logger_ctd module</a></li>
<li class="toctree-l2"><a class="reference internal" href="main.html">main module</a></li>
<li class="toctree-l2"><a class="reference internal" href="pressure.html">pressure module</a></li>
<li class="toctree-l2"><a class="reference internal" href="thermistor_ac.html">thermistor_ac module</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">CTD</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="modules.html">CTD</a> &raquo;</li>
        
      <li>conductivity4pole module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/conductivity4pole.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-conductivity4pole">
<span id="conductivity4pole-module"></span><h1>conductivity4pole module<a class="headerlink" href="#module-conductivity4pole" title="Permalink to this headline">¶</a></h1>
<p>A four-pole conductivity sensor containing a thermistor.</p>
<dl class="py class">
<dt id="conductivity4pole.cond_sensor">
<em class="property">class </em><code class="sig-prename descclassname">conductivity4pole.</code><code class="sig-name descname">cond_sensor</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">p_1</span></em>, <em class="sig-param"><span class="n">p_2</span></em>, <em class="sig-param"><span class="n">adc_current</span></em>, <em class="sig-param"><span class="n">adc_p_3</span></em>, <em class="sig-param"><span class="n">adc_p_4</span></em>, <em class="sig-param"><span class="n">con_resistance</span></em>, <em class="sig-param"><span class="n">adc_therm</span></em>, <em class="sig-param"><span class="n">therm_resistance</span></em>, <em class="sig-param"><span class="n">A</span></em>, <em class="sig-param"><span class="n">B</span></em>, <em class="sig-param"><span class="n">C</span></em>, <em class="sig-param"><span class="n">therm_power</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">therm_ground</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#conductivity4pole.cond_sensor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A class for interacting with a four-pole conductivity sensor and thermistor.</p>
<p>Performs measurement using the analog to digial converter
to read values of voltage drop across the two inner electrodes
(when excited by a square wave applied to two outer electrodes)
and to read values from the thermistor.  Also includes methods for
converting readings to physical values, based on calibration
parameters specified when instantiated. Requires following import statements:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pyb</span>
<span class="kn">from</span> <span class="nn">pyb</span> <span class="kn">import</span> <span class="n">Pin</span><span class="p">,</span> <span class="n">ADC</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">array</span> <span class="k">as</span> <span class="nn">arr</span>
<span class="kn">import</span> <span class="nn">thermistor</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>p_1</strong> (<em>:obj:'pyb.Pin</em><em>(</em><em>pinid</em><em>, </em><em>Pin.OUT_PP</em><em>)</em><em>'</em>) – Power/ground pin connected directly to current balancing resistor R1</p></li>
<li><p><strong>p_2</strong> (<em>:obj:'pyb.Pin</em><em>(</em><em>pinid</em><em>, </em><em>Pin.OUT_PP</em><em>)</em><em>'</em>) – Power/ground pin connected to current measuring resistor R1</p></li>
<li><p><strong>adc_current</strong> (<em>:obj:'pyb.ADC</em><em>(</em><em>pinid</em><em>)</em><em>'</em>) – ADC pin connected between conductivity resistor and conductivity electrode</p></li>
<li><p><strong>adc_p_3</strong> (<em>:obj:'pyb.ADC</em><em>(</em><em>pinid</em><em>)</em><em>'</em>) – ADC pin connected to pole 3 (sensing pole farthest from current measuring resistor)</p></li>
<li><p><strong>adc_p_4</strong> (<em>:obj:'pyb.ADC</em><em>(</em><em>pinid</em><em>)</em><em>'</em>) – ADC pin connected to pole 4 (sensing pole closest to current measuring resistor)</p></li>
<li><p><strong>con_resistance</strong> (<em>float</em>) – Resistance (ohm) of current measuring resistor</p></li>
<li><p><strong>adc_therm</strong> (<em>:obj:'pyb.ADC</em><em>(</em><em>pinid</em><em>)</em><em>'</em>) – ADC pin connected between thermistor ressistor and thermistor</p></li>
<li><p><strong>therm_resistance</strong> (<em>float</em>) – Resistance in measurement circuit for 10KOhm Thermistor</p></li>
<li><p><strong>A</strong> (<em>float</em>) – Calibration coefficient A</p></li>
<li><p><strong>B</strong> (<em>float</em>) – Calibration coefficient B</p></li>
<li><p><strong>C</strong> (<em>float</em>) – Calibration coefficient C</p></li>
<li><p><strong>therm_power</strong> (<em>obj:'pyb.Pin</em><em>(</em><em>pinid</em><em>, </em><em>Pin.OUT_PP'</em><em>)</em><em>, </em><em>optional</em>) – Power pin used to power thermistor.  Defaults to none (power from 3.3V).</p></li>
<li><p><strong>therm_ground</strong> (<em>:obj:'pyb.Pin</em><em>(</em><em>pinid</em><em>, </em><em>Pin.OUT_PP'</em><em>)</em><em>, </em><em>optional</em>) – Ground pin used to ground thermistor.  Defaults to none (directly wired to ground).</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="conductivity4pole.cond_sensor.resistance1">
<code class="sig-name descname">resistance1</code><a class="headerlink" href="#conductivity4pole.cond_sensor.resistance1" title="Permalink to this definition">¶</a></dt>
<dd><p>Apparent resistance computed from count1</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="conductivity4pole.cond_sensor.resistance2">
<code class="sig-name descname">resistance2</code><a class="headerlink" href="#conductivity4pole.cond_sensor.resistance2" title="Permalink to this definition">¶</a></dt>
<dd><p>Apparent resistance computed from count2</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="conductivity4pole.cond_sensor.T">
<code class="sig-name descname">T</code><a class="headerlink" href="#conductivity4pole.cond_sensor.T" title="Permalink to this definition">¶</a></dt>
<dd><p>Temperature (degrees C)</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="conductivity4pole.cond_sensor.k">
<code class="sig-name descname">k</code><a class="headerlink" href="#conductivity4pole.cond_sensor.k" title="Permalink to this definition">¶</a></dt>
<dd><p>Conductivity (uS/cm)</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="conductivity4pole.cond_sensor.S">
<code class="sig-name descname">S</code><a class="headerlink" href="#conductivity4pole.cond_sensor.S" title="Permalink to this definition">¶</a></dt>
<dd><p>Salinity</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">p_1</span> <span class="o">=</span> <span class="n">Pin</span><span class="p">(</span><span class="s1">&#39;Y3&#39;</span><span class="p">,</span> <span class="n">Pin</span><span class="o">.</span><span class="n">OUT_PP</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p_2</span> <span class="o">=</span> <span class="n">Pin</span><span class="p">(</span><span class="s1">&#39;Y4&#39;</span><span class="p">,</span> <span class="n">Pin</span><span class="o">.</span><span class="n">OUT_PP</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t_1</span> <span class="o">=</span> <span class="n">Pin</span><span class="p">(</span><span class="s1">&#39;Y2&#39;</span><span class="p">,</span> <span class="n">Pin</span><span class="o">.</span><span class="n">OUT_PP</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adc_current</span> <span class="o">=</span> <span class="n">ADC</span><span class="p">(</span><span class="s1">&#39;X1&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adc_p_3</span> <span class="o">=</span> <span class="n">ADC</span><span class="p">(</span><span class="s1">&#39;X2&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adc_p_4</span> <span class="o">=</span> <span class="n">ADC</span><span class="p">(</span><span class="s1">&#39;X3&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adc_therm</span> <span class="o">=</span> <span class="n">ADC</span><span class="p">(</span><span class="s1">&#39;X4&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Res</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">A</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">B</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">C</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">TRes</span> <span class="o">=</span> <span class="mi">10000</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Sensor1</span> <span class="o">=</span> <span class="n">cond_sensor</span><span class="p">(</span><span class="n">p_1</span><span class="p">,</span><span class="n">p_2</span><span class="p">,</span><span class="n">adc_current</span><span class="p">,</span><span class="n">adc_p_3</span><span class="p">,</span><span class="n">adc_p_4</span><span class="p">,</span><span class="n">Res</span><span class="p">,</span><span class="n">adctherm</span><span class="p">,</span><span class="n">TRes</span><span class="p">,</span><span class="n">A</span><span class="p">,</span><span class="n">B</span><span class="p">,</span><span class="n">C</span><span class="p">,</span><span class="n">t_1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Sensor1</span><span class="o">.</span><span class="n">calibrate</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#run external calibration to get A,B,C</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">A</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1">#enter correct values here</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">B</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">C</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Sensor1</span><span class="o">.</span><span class="n">measure</span><span class="p">()</span>
</pre></div>
</div>
<dl class="py method">
<dt id="conductivity4pole.cond_sensor.TDS">
<code class="sig-name descname">TDS</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">k25</span></em><span class="sig-paren">)</span><a class="headerlink" href="#conductivity4pole.cond_sensor.TDS" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate total dissolved solids from conductivity at 25C, from Pawlowicz 2008, which says the coefficient varies widely.</p>
</dd></dl>

<dl class="py method">
<dt id="conductivity4pole.cond_sensor.calibrate">
<code class="sig-name descname">calibrate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#conductivity4pole.cond_sensor.calibrate" title="Permalink to this definition">¶</a></dt>
<dd><p>Record calibration data.</p>
<p>Prompts user to enter data about calibration standard, then makes measurement and
saves results to user-specified file.</p>
</dd></dl>

<dl class="py method">
<dt id="conductivity4pole.cond_sensor.conductivity">
<code class="sig-name descname">conductivity</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">r2</span></em>, <em class="sig-param"><span class="n">A</span></em>, <em class="sig-param"><span class="n">B</span></em>, <em class="sig-param"><span class="n">C</span></em><span class="sig-paren">)</span><a class="headerlink" href="#conductivity4pole.cond_sensor.conductivity" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply the sensor-specific conductivity calibration equation.</p>
<p>Compute a sensor-specific value of conductivity from measured cell resistance
and calibration values. Returns a sensor-specific value of conductivity
Using the non-linear form for k that best fits our calibration data
Parameters A, B, and C are all sensor-specific parameters that must
be found by calibration.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>r2</strong> (<em>float</em>) – Apparent resistance of the solution when the power is applied to electrode connected
directly to the power pin.</p></li>
<li><p><strong>A</strong> (<em>float</em>) – Calibration coefficient A</p></li>
<li><p><strong>B</strong> (<em>float</em>) – Calibration coefficient B</p></li>
<li><p><strong>C</strong> (<em>float</em>) – Calibration coefficient C</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Calibrated conductivity</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="conductivity4pole.cond_sensor.k25">
<code class="sig-name descname">k25</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">k</span></em>, <em class="sig-param"><span class="n">T</span></em><span class="sig-paren">)</span><a class="headerlink" href="#conductivity4pole.cond_sensor.k25" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate conductivity at standard temperature of 25C, for KCl or fresh water (not seawater).</p>
<p>Given by USGS Water Supply Paper and Pawlowicz 2008.</p>
</dd></dl>

<dl class="py method">
<dt id="conductivity4pole.cond_sensor.measure">
<code class="sig-name descname">measure</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">printflag</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">n</span><span class="o">=</span><span class="default_value">12</span></em>, <em class="sig-param"><span class="n">on1</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">off1</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">on2</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">off2</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#conductivity4pole.cond_sensor.measure" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs a measurement of conductivity across a four-pole probe.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>saveflag</strong> (<em>boolean</em><em>, </em><em>optional</em>) – Flag to determine if output is saved for calibration, default false</p></li>
<li><p><strong>n</strong> (<em>int</em><em>, </em><em>optional</em>) – Number of adc readings to take for the measurement, default = 12</p></li>
<li><p><strong>on1</strong> (<em>int</em><em>, </em><em>optional</em>) – time in microseconds that power pin 1 is on before taking a reading, default = 0</p></li>
<li><p><strong>off1</strong> (<em>int</em><em>, </em><em>optional</em>) – time in microseconds that power pin 1 is turned off before turning on power pin, default = 0</p></li>
<li><p><strong>on2</strong> (<em>int</em><em>, </em><em>optional</em>) – time in microseconds that power pin 2 is on before taking a reading, default = 0</p></li>
<li><p><strong>off2</strong> (<em>int</em><em>,</em><em>optional</em>) – time in microseconds that power pin 2 is turned off before turning on power pin, default = 0</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>resistance1</strong> (<em>float</em>) – Apparent resistance computed using normal polarity.</p></li>
<li><p><strong>resistance2</strong> (<em>float</em>) – Apparent resistance computed using reverse polarity.</p></li>
<li><p><strong>temperature</strong> (<em>float</em>) – Temperature (degrees C)</p></li>
<li><p><strong>conductivity</strong> (<em>float</em>) – Conductivity.</p></li>
</ul>
</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Also sets the value for temperature, conductivity, counts, and resistances</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="conductivity4pole.cond_sensor.salinity">
<code class="sig-name descname">salinity</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">T</span></em>, <em class="sig-param"><span class="n">k</span></em><span class="sig-paren">)</span><a class="headerlink" href="#conductivity4pole.cond_sensor.salinity" title="Permalink to this definition">¶</a></dt>
<dd><p>Salinity computation for seawater and estuarine water.
Salinity computation is from Miller, Bradford, and Peters,
USGS Water Supply Paper 2311.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>T</strong> (<em>float</em>) – Temperature (degrees C)</p></li>
<li><p><strong>k</strong> (<em>float</em>) – Conductance (mS/cm)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Salinity (parts per thousand)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="logger_ctd.html" class="btn btn-neutral float-right" title="logger_ctd module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="conductivity2pole.html" class="btn btn-neutral float-left" title="conductivity2pole module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2021, Wes Lauer

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>